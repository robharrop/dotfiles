# General mutt settings that apply to all accounts.
# Note that this file is intended to be sourced from ~/.mutt/.muttrc.account
# Launching 'mutt' with no options will read just this file, but not do
# anything useful.
# Launch mutt with mutt -F ~/.mutt/.muttrc.account to start a mutt session
# attached to a given account.
#

# -------------------------------------------------------------------------------------
#                                  BASIC SETTINGS
# -------------------------------------------------------------------------------------
set editor="vim -c 'set fo=tcrq' -c 'set tw=76' -c 'syntax on' -c 'start'"

set timeout=60
set auto_tag=yes
set folder_format = '%2C %N %d %f'
set index_format = '%4C %Z %{%b %d} %-15.15L (%e/%E) %s'
set pager_index_lines=5
set pager_context=3
set print_command="muttprint -P a4 -p CUPS_PDF"
set move=no
set delete=yes
set mime_forward=ask-no
set mime_forward_rest=ask-yes
unset markers

mailboxes +INBOX

# hide some headers
ignore headers *
unignore headers from to subject date cc bcc

# show the ones we do want to see in this order...
hdr_order From Subject To: Cc: Bcc:

# what do we prefer to see?
alternative_order text/enriched text/plain text/html
auto_view text/html

# Specifies how to sort messages in the index menu.
set sort=threads

# -------------------------------------------------------------------------------------
#                                  KEY BINDINGS
# -------------------------------------------------------------------------------------
# shortcut for main inbox
macro index I "c!\n" "Go to Inbox"

# extract urls and open them
macro index \cb |urlview\n "open urls"
macro pager \cb |urlview\n "open urls"

# move a mail message into my archive folder
macro index \ca s+archive\n\n "move message directly to archive folder"
macro pager \ca s+archive\n\n "move message directly to archive folder"

# searching via mairix
macro generic ,f "<enter-command>set wait_key=yes<enter><shell-escape>mairix " "search across folders"
macro generic ,,f "<change-folder><kill-line>=../search<enter>" "load search results"

# key bindings for moving between index, pager, and folder listing
macro index <right> $<display-message> "display message" 
macro index <left> "c?" "browse mailboxes"   # left to see list of mailboxes
bind browser <right> select-entry  
bind pager <left> exit

# imitate the old search-body function
macro index \eb "<search>~b " "search in message bodies"

# simulate the old url menu
macro pager \cb "<pipe-message>urlview<Enter>" "call urlview to extract URLs out of a message"
macro index \cb "<pipe-message>urlview<Enter>" "call urlview to extract URLs out of a message"

# Show documentation when pressing F1
macro generic <f1> "!zcat /usr/share/doc/mutt/manual.txt.gz | sensible-pager\n" "Show Mutt documentation"
macro index   <f1> "!zcat /usr/share/doc/mutt/manual.txt.gz | sensible-pager\n" "Show Mutt documentation"
macro pager   <f1> "!zcat /usr/share/doc/mutt/manual.txt.gz | sensible-pager\n" "Show Mutt documentation"

# -------------------------------------------------------------------------------------
#                                 ATTACHMENT HANDLING
# -------------------------------------------------------------------------------------

# attachments   +A */.*
# attachments   -A text/x-vcard application/pgp.*
# attachments   -A application/x-pkcs7-.*

## Discount all MIME parts with an "inline" disposition, unless they're
## text/plain. (Why inline a text/plain part unless it's external to the
## message flow?)
##
# attachments   +I text/plain
## You probably don't really care to know about deleted attachments.
# attachments   -A message/external-body
# attachments   -I message/external-body

# -------------------------------------------------------------------------------------
#                                       COLOURS
# -------------------------------------------------------------------------------------
#
# allowed mutt colours are:
# white, black, green, magenta, blue, cyan, yellow, red,
# or colorx foreground colours may have a "bright" prefix

color normal white black
color attachment yellow black
color hdrdefault cyan black
color indicator black yellow
color markers brightmagenta black
color quoted green black
color signature cyan black
color tilde blue black
color tree red black
#color status cyan blue
color status black cyan 

color header brightyellow black ^From:
color header brightyellow black ^Subject:
color index cyan black ~l # list messages
color index green black ~N # new messages
color index green  black ~O # unread messages
color index red black ~F # flagged messages
color index brightyellow black ~T # tagged messages
color index magenta black ~D # deleted messages
color index black red "~f progressivecyclecoaching" # coaching messages

# quote levels
#  Coloring quoted text - coloring the first 7 levels:
color quoted    cyan      default
color quoted1   yellow    default
color quoted2   red       default
color quoted3   green     default
color quoted4   cyan      default
color quoted5   yellow    default
color quoted6   red       default
color quoted7   green     default

# urls
color body green black "[[:alpha:]]\+://[^ ]*"
